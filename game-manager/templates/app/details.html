{% extends 'base.html' %}

{% block header %}
<h2>{% block title %}{{ game.name }}{% endblock %}</h2>
{% endblock %}

{% block content %}
{{ game }}
<h3>Logs</h3>
<textarea id="pod_logs" rows="31" cols="100" readonly></textarea>
{% endblock %}
{% block footer_content %}
<script>
function makeHttpObject()
{
    try {return new XMLHttpRequest();}
    catch (error) {}
    try {return new ActiveXObject("Msxml2.XMLHTTP");}
    catch (error) {}
    try {return new ActiveXObject("Microsoft.XMLHTTP");}
    catch (error) {}
    throw new Error("Could not create HTTP request object.");
}

function updateLogs()
{
    var request = makeHttpObject();
    request.open("GET", "{{ url_for('app.logs',namespace=game.namespace, name=game.pod_name) }}", true);
    request.send(null);
    request.onreadystatechange = function() {
      if (request.readyState == 4)
        changeContent(request.responseText);
    };
}

function changeContent(contents)
{
    var x = document.getElementById('pod_logs');
    x.value = contents;
}

</script>
{% endblock %}
